<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>認証方式の比較（SSO / メールアドレス認証 / ID・パスワード）</title>
  <style>
    body { font-family: "Segoe UI", "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, Arial, sans-serif; background:#ffffff; color:#111; line-height:1.75; margin:0; }
    main { max-width: 960px; margin: 24px auto; padding: 24px; border:1px solid #e5e7eb; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.06); background:#fff; }
    h1 { color:#0b4a6f; margin:0 0 12px; }
    h2 { color:#0b4a6f; margin:24px 0 8px; }
    h3 { color:#0b4a6f; margin:16px 0 6px; }
    p { margin: 0 0 12px; }
    table { width:100%; border-collapse:collapse; margin: 12px 0; font-size: 14px; }
    th, td { border:1px solid #e5e7eb; padding:8px; text-align:left; vertical-align:top; }
    th { background:#f1f5f9; }
    .note { background:#e0f2fe; border-left:6px solid #0ea5e9; padding:12px; border-radius:6px; margin:12px 0; }
    .merit { background:#dcfce7; border-left:6px solid #22c55e; padding:12px; border-radius:6px; margin:12px 0; }
    .warn  { background:#fff7ed; border-left:6px solid #fb923c; padding:12px; border-radius:6px; margin:12px 0; }
    .demerit { background:#fee2e2; border-left:6px solid #ef4444; padding:12px; border-radius:6px; margin:12px 0; }
    .tags { display:flex; flex-wrap:wrap; gap:8px; margin:10px 0 0; }
    .tag { font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid #e5e7eb; background:#f8fafc; }
    .tag.ok { border-color:#86efac; background:#dcfce7; }
    .tag.warn { border-color:#fed7aa; background:#fffbeb; }
    .tag.bad { border-color:#fecaca; background:#fee2e2; }
    .summary { background:#f8fafc; border: 2px solid #e2e8f0; padding: 12px; border-radius: 8px; }
  </style>
</head>
<body>
<main>
  <h1>🔐 認証方式の比較（SSO / メールアドレス認証 / ID・パスワード）</h1>
  <p><strong>目的:</strong> 3方式の違いを最短で把握し、用途別の推奨をすぐ決められるように要点だけを整理。</p>

  <div class="note">
    <strong>結論（先出し）:</strong>
    <div class="tags">
      <span class="tag ok">社内 / B2B → <b>SSO</b>（SAML/OIDC）</span>
      <span class="tag warn">B2C / 登録軽量 → <b>メール認証</b>（マジックリンク/OTP）</span>
      <span class="tag bad">レガシー要件のみ → <b>ID・パスワード</b>（MFA必須）</span>
    </div>
  </div>

  <h2>🧭 1枚比較表</h2>
  <table>
    <thead>
      <tr>
        <th>観点</th>
        <th>SSO（SAML / OIDC）</th>
        <th>メールアドレス認証（マジックリンク / OTP）</th>
        <th>ID・パスワード</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>概要</th>
        <td>IdP（Entra ID / Okta / Google）で統合認証。ポリシー・監査を集中管理。</td>
        <td>パスワード不要。メールのリンク/コードで一時サインイン。</td>
        <td>アプリ側にIDとパスワードを保存・照合する従来方式。</td>
      </tr>
      <tr>
        <th>UX</th>
        <td>社内アカウントでワンクリック。MFA/条件付きアクセスもシームレス。</td>
        <td>入力が少なく直感的。ただしメール受信の遅延・迷惑判定の影響あり。</td>
        <td>覚える・管理が重い。リセット/ロック対応が発生しやすい。</td>
      </tr>
      <tr>
        <th>セキュリティ</th>
        <td>高：MFA/端末制御/リスク判定/鍵認証をIdPで適用可能。</td>
        <td>中：メール乗っ取り対策（短期有効・1回限り・端末バインド・レート制限）。</td>
        <td>低〜中：使い回し・漏えい・総当たり対策が常に課題。MFAは必須。</td>
      </tr>
      <tr>
        <th>運用</th>
        <td>SCIM等で自動プロビジョニング。監査ログ一元化、退職者即時無効化。</td>
        <td>実装容易。到達率維持（SPF/DKIM/DMARC）と送信上限管理が必要。</td>
        <td>パスワードリセット・強度/有効期限ポリシー運用の負荷が高い。</td>
      </tr>
      <tr>
        <th>コスト</th>
        <td>IdP/SSOライセンスや初期実装が必要。規模が大きいほどTCO低下。</td>
        <td>メール送信の従量課金が中心。利用増で漸増。</td>
        <td>初期は最小だが、事故/対応コストが積み上がりやすい。</td>
      </tr>
      <tr>
        <th>向く用途</th>
        <td>社内SaaS、B2B、法令・監査要件が強い業務システム。</td>
        <td>コンシューマ/軽量B2C、試用、イベント、期間限定アクセス。</td>
        <td>オフライン・レガシー互換が不可避な限定ケース。</td>
      </tr>
    </tbody>
  </table>

  <h2>✅ 推奨（ユースケース別）</h2>
  <div class="merit">
    <strong>社内 / B2B（数十〜数万ユーザー）:</strong> <u>SSO（SAML/OIDC）</u> を第一候補。MFA/条件付きアクセス、SCIMで自動プロビジョニング、監査ログの一元化。BCPとしてメール認証やWebAuthnを退避経路に。
  </div>
  <div class="warn">
    <strong>B2C / 登録を軽くしたい:</strong> <u>メール認証（マジックリンク/OTP）</u> を既定に。リンクを短期有効・1回限り・端末固定、レート制限を徹底。ヘビーユースにはSSO/パスキーも併設。
  </div>
  <div class="demerit">
    <strong>レガシー/オフライン制約が強い:</strong> <u>ID・パスワード</u> を暫定採用。<b>MFA必須</b>、総当たり対策・漏えい監視・段階的なパスワードレス移行計画を付帯。
  </div>

  <h2>📝 実装の勘所（超要約）</h2>
  <table>
    <thead>
      <tr><th>方式</th><th>ポイント</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>SSO</td>
        <td>SAML/OIDCの実装、メタデータ管理、グループで権限付与、SCIMでユーザー同期、SLO/BCP設計。</td>
      </tr>
      <tr>
        <td>メール認証</td>
        <td>トークン有効期限5〜10分、1回限り、端末バインド、到達率改善（SPF/DKIM/DMARC）、リプレイ・多送対策。</td>
      </tr>
      <tr>
        <td>ID・PW</td>
        <td>Argon2等でハッシュ、強度/回転ポリシー、TOTP/WebAuthnでMFA、ブルートフォース/漏えい検知。</td>
      </tr>
    </tbody>
  </table>

  <div class="summary">
    <strong>まとめ:</strong> 迷ったら「<b>社内/B2B＝SSO</b>」「<b>B2C＝メール認証</b>」。ID・PWはMFA前提の暫定策に留め、将来はパスワードレスへ。
  </div>
</main>
</body>
</html>
