<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Squidã§ã€Œhttp_port 8080ã€ã¨ã€Œhttps_port 8082ã€ã‚’ä½¿ã„åˆ†ã‘ã‚‹ï¼ˆé«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆç‰ˆï¼‰</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #111111;
      --muted: #374151;
      --border: #cbd5e1;
      --head: #0b4a6f;
      --tbl-head: #f1f5f9;
      --code-bg: #ffffff;
      --link: #0b63a3;
    }
    html, body {
      margin: 0; padding: 0;
      background: var(--bg); color: var(--text);
      font-family: "Segoe UI", Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, sans-serif;
      line-height: 1.75;
    }
    a { color: var(--link); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .wrap { max-width: 980px; margin: 0 auto; padding: 28px 18px 56px; }
    header { padding: 8px 0 14px; border-bottom: 1px solid var(--border); margin-bottom: 18px; }
    h1 { font-size: 1.9rem; margin: 0 0 4px; letter-spacing: .02em; color: var(--head); }
    h2 { margin-top: 2.0rem; color: var(--head); }
    h3 { margin-top: 1.2rem; color: var(--head); }
    h4 { margin-top: 1.0rem; color: var(--head); }
    .card { background: #fff; border: 1px solid var(--border); border-radius: 12px; padding: 14px 16px; margin: 12px 0 18px; }
    blockquote { margin: 12px 0; padding: 10px 14px; border-left: 6px solid #0ea5e9; background: #e0f2fe; border-radius: 8px; }
    pre {
      background: var(--code-bg); border: 1px solid var(--border); border-radius: 12px;
      padding: 12px 14px; overflow: auto;
    }
    pre code {
      color: #111; font-size: 15px; line-height: 1.35; white-space: pre; display: block;
      font-family: Consolas, Menlo, Monaco, "Courier New", ui-monospace, SFMono-Regular, monospace;
    }
    code {
      background: #fff; border: 1px solid var(--border); padding: 0 .25em; border-radius: 6px; font-size: .93em;
      font-family: Consolas, Menlo, Monaco, "Courier New", ui-monospace, SFMono-Regular, monospace;
    }
    table { width: 100%; border-collapse: collapse; margin: 12px 0 18px; font-size: 0.97rem; }
    th, td { border: 1px solid var(--border); padding: 8px 10px; text-align: left; vertical-align: top; }
    th { background: var(--tbl-head); }
    hr { border: none; border-top: 1px solid var(--border); margin: 20px 0; }
    ul { padding-left: 1.2rem; }
    ol { padding-left: 1.2rem; }
    input[type="checkbox"] { transform: scale(1.05); margin-right: 6px; }
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>ğŸ§­ Squidã§ã€Œ<code>http_port 8080</code>ã€ã¨ã€Œ<code>https_port 8082</code>ã€ã‚’ä½¿ã„åˆ†ã‘ã‚‹</h1>
  </header>

  <blockquote>
    <p>ã“ã®è¨˜äº‹ã§ã¯ã€<strong><code>http_port</code> ã¨ <code>https_port</code> ã®é•ã„</strong>ã€<strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®è¨­å®šæ–¹æ³•</strong>ã€<strong>é‹ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>ã€<strong>ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã®ç¢ºèªãƒã‚¤ãƒ³ãƒˆ</strong>ã‚’è§£èª¬ã—ã¾ã™ã€‚</p>
  </blockquote>

  <h2>ç›®æ¬¡</h2>
  <ol>
    <li><a href="#http8080">1. <code>http_port 8080</code> ã®å‹•ä½œ</a></li>
    <li><a href="#https8082">2. <code>https_port 8082</code> ã®å‹•ä½œï¼ˆSSL Bump/é€éï¼‰</a></li>
    <li><a href="#compare">3. <code>http_port</code> ã¨ <code>https_port</code> ã®æ¯”è¼ƒè¡¨</a></li>
    <li><a href="#ops">4. å®Ÿé‹ç”¨ã®ãŠã™ã™ã‚æ§‹æˆ</a></li>
    <li><a href="#client">5. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šã®å…·ä½“ä¾‹</a></li>
    <li><a href="#trouble">6. ã‚ˆãã‚ã‚‹ãƒãƒã‚Šã©ã“ã‚ï¼ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰</a></li>
    <li><a href="#samples">7. ã‚µãƒ³ãƒ—ãƒ«è¨­å®šï¼ˆãã®ã¾ã¾æµç”¨å¯ï¼‰</a></li>
    <li><a href="#summary">8. ã¾ã¨ã‚</a></li>
    <li><a href="#verify">ä»˜éŒ²ï¼šå‹•ä½œç¢ºèªã‚³ãƒãƒ³ãƒ‰</a></li>
  </ol>

  <hr>

  <h2 id="http8080">1. <code>http_port 8080</code> ã®å‹•ä½œ</h2>
  <p><strong>å½¹å‰²</strong>ï¼šæ¨™æº–çš„ãª <strong>HTTPãƒ—ãƒ­ã‚­ã‚·</strong>ã€‚ãƒ–ãƒ©ã‚¦ã‚¶/OSã§æ˜ç¤ºãƒ—ãƒ­ã‚­ã‚·ã‚’è¨­å®šã—ã¦åˆ©ç”¨ã—ã¾ã™ã€‚<br>
     <strong>HTTPSã®æ‰±ã„</strong>ï¼š<code>CONNECT</code> ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒˆãƒ³ãƒãƒ«ã‚’å¼µã‚Šã€ä¸­èº«ã¯è¦‹ãˆã¾ã›ã‚“ã€‚</p>

  <p><strong>é€šä¿¡ãƒ•ãƒ­ãƒ¼ï¼ˆæ¦‚å¿µï¼‰</strong></p>
  <pre><code>Client --HTTP--> Squid(http_port) --HTTP/HTTPS--> Web
                â””â”€ HTTPSã¯CONNECTã§ãƒˆãƒ³ãƒãƒ«</code></pre>

  <p><strong>ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶â†’Squidï¼‰</strong></p>
  <pre><code>GET http://www.example.com/ HTTP/1.1
Host: www.example.com</code></pre>

<div style="text-align: center;"><img src="images/s2-1.png" alt="" width="640" height="312.4"></div><br>
<div style="text-align: center;"><img src="images/s2-2.png" alt="" width="640" height="321.2"></div><br>

  <p><strong>ãƒã‚¤ãƒ³ãƒˆ</strong></p>
  <ul>
    <li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€œSquidé–“ã¯ <strong>å¹³æ–‡(HTTP)</strong>ã€‚</li>
    <li><strong>è¨¼æ˜æ›¸é…å¸ƒã¯ä¸è¦</strong>ï¼ˆä¸­èº«ã‚’è¦‹ãªã„ãŸã‚ï¼‰ã€‚</li>
  </ul>

  <hr>

  <h2 id="https8082">2. <code>https_port 8082</code> ã®å‹•ä½œï¼ˆSSL Bump/é€éï¼‰</h2>
  <p><strong>å½¹å‰²</strong>ï¼š<strong>TLS(HTTPS)ã‚’Squidã§çµ‚ç«¯</strong>ã™ã‚‹ãŸã‚ã®ãƒãƒ¼ãƒˆã€‚<br>
     <strong>ä¸»ãªç”¨é€”</strong>ï¼š<strong>SSL Bumpï¼ˆå¾©å·æ¤œæŸ»ï¼‰</strong>ã€<strong>é€éHTTPSãƒ—ãƒ­ã‚­ã‚·</strong>ã€‚</p>

  <p><strong>é€šä¿¡ãƒ•ãƒ­ãƒ¼ï¼ˆæ¦‚å¿µï¼‰</strong></p>
  <pre><code>Client --TLS(HTTPS)--> Squid(https_port) --TLS/HTTP--> Web
                         â””â”€ å¿…è¦ã«å¿œã˜ã¦å¾©å·(ssl_bump)</code></pre>

<div style="text-align: center;"><img src="images/s2-3.png" alt="" width="610.4" height="314.4"></div><br>
<div style="text-align: center;"><img src="images/s2-4.png" alt="" width="606.4" height="308.8"></div><br>

  <p><strong>ãƒã‚¤ãƒ³ãƒˆ</strong></p>
  <ul>
    <li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€œSquidé–“ã‚‚ <strong>æš—å·åŒ–</strong>ã€‚</li>
    <li><strong>ãƒ«ãƒ¼ãƒˆCAè¨¼æ˜æ›¸ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸é…å¸ƒãƒ»ä¿¡é ¼</strong>ã•ã›ã‚‹å¿…è¦ã‚ã‚Šï¼ˆbumpã™ã‚‹å ´åˆï¼‰ã€‚</li>
    <li>é€éé‹ç”¨æ™‚ã¯ L3/L4 ã§ <code>443 â†’ 8082</code> ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€‚</li>
    <li>Bumpã«ã¤ã„ã¦ã¯è©³ã—ãã¯<a href="squid_adcs_ssl_bump.html">ã“ã¡ã‚‰</a>ã‹ã‚‰</li>
  </ul>

  <hr>

  <h2 id="compare">3. <code>http_port</code> ã¨ <code>https_port</code> ã®æ¯”è¼ƒè¡¨</h2>
  <table>
    <thead>
      <tr>
        <th>æ¯”è¼ƒé …ç›®</th>
        <th><code>http_port 8080</code></th>
        <th><code>https_port 8082</code></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>ä¸»ãªç”¨é€”</td>
        <td>é€šå¸¸ã®HTTP/HTTPSãƒ—ãƒ­ã‚­ã‚·</td>
        <td>SSL Bump / é€éHTTPS</td>
      </tr>
      <tr>
        <td>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¥ç¶š</td>
        <td>HTTP</td>
        <td>HTTPS (TLS)</td>
      </tr>
      <tr>
        <td>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š</td>
        <td>æ˜ç¤ºãƒ—ãƒ­ã‚­ã‚·</td>
        <td>æ˜ç¤º or é€éï¼ˆFW/NATå¿…é ˆï¼‰</td>
      </tr>
      <tr>
        <td>æš—å·åŒ–ï¼ˆClientâ†’Squidï¼‰</td>
        <td>ãªã—ï¼ˆå¹³æ–‡ï¼‰</td>
        <td>ã‚ã‚Šï¼ˆTLSï¼‰</td>
      </tr>
      <tr>
        <td>è¨¼æ˜æ›¸é…å¸ƒ</td>
        <td>ä¸è¦</td>
        <td>å¿…è¦ï¼ˆä¸­é–“CAï¼‰</td>
      </tr>
      <tr>
        <td>HTTPSã®ä¸­èº«å¯è¦–åŒ–</td>
        <td>ä¸å¯ï¼ˆCONNECTã®ãƒˆãƒ³ãƒãƒ«ï¼‰</td>
        <td>å¯èƒ½ï¼ˆbumpæ™‚ï¼‰</td>
      </tr>
    </tbody>
  </table>

  <hr>

  <h2 id="ops">4. å®Ÿé‹ç”¨ã®ãŠã™ã™ã‚æ§‹æˆ</h2>
  <h3>A. ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆHTTPSæ¤œæŸ»ãªã—ï¼‰</h3>
  <ul>
    <li><strong>ç›®çš„</strong>ï¼šãƒ­ã‚°/ã‚­ãƒ£ãƒƒã‚·ãƒ¥/URLãƒ•ã‚£ãƒ«ã‚¿ã‚’è»½ãå…¥ã‚ŒãŸã„</li>
    <li><strong>è¨­å®š</strong>ï¼š<code>http_port 8080</code> ã®ã¿</li>
    <li><strong>ãƒ¡ãƒªãƒƒãƒˆ</strong>ï¼šè¨¼æ˜æ›¸é…å¸ƒä¸è¦ã€ãƒˆãƒ©ãƒ–ãƒ«å°‘ãªã‚</li>
  </ul>

  <h3>B. æ¤œæŸ»ã‚ã‚Šï¼ˆSSL Bumpï¼‰</h3>
  <ul>
    <li><strong>ç›®çš„</strong>ï¼šHTTPSã®å†…å®¹ã‚’å¯è¦–åŒ–ãƒ»åˆ¶å¾¡ï¼ˆãƒãƒ«ã‚¦ã‚§ã‚¢æ¤œæŸ»ç­‰ï¼‰</li>
    <li><strong>è¨­å®š</strong>ï¼š<code>http_port 8080</code> + <code>https_port 8082 ssl-bump ...</code></li>
    <li><strong>è¦ä»¶</strong>ï¼šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã« <strong>ãƒ«ãƒ¼ãƒˆCAè¨¼æ˜æ›¸é…å¸ƒ</strong>ã€ãƒãƒªã‚·ãƒ¼èª¬æ˜</li>
  </ul>

  <h3>C. é€éï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šãªã—ã§å¼·åˆ¶ãƒ—ãƒ­ã‚­ã‚·ï¼‰</h3>
  <ul>
    <li><strong>ç›®çš„</strong>ï¼šç«¯æœ«å´è¨­å®šãªã—ã§çµ±åˆ¶</li>
    <li><strong>è¨­å®š</strong>ï¼šFW/ãƒ«ãƒ¼ã‚¿ã§ <code>tcp/443 â†’ 8082</code>ã€<code>tcp/80 â†’ 3128/8080</code> ãªã©ã«NAT</li>
    <li><strong>è¦ä»¶</strong>ï¼šãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å´ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå®šç¾© + CAé…å¸ƒï¼ˆHTTPSé€éæ™‚ï¼‰</li>
  </ul>

  <hr>

  <h2 id="client">5. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šã®å…·ä½“ä¾‹</h2>
  <h3>æ˜ç¤ºãƒ—ãƒ­ã‚­ã‚·ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶/OSï¼‰</h3>
  <ul>
    <li><strong><code>http_port</code> ã®ã¿</strong><br>
      HTTPãƒ—ãƒ­ã‚­ã‚·ï¼š<code>192.168.100.205:8080</code><br>
      HTTPSãƒ—ãƒ­ã‚­ã‚·ï¼š<code>192.168.100.205:8080</code>
    </li>
    <li><strong><code>https_port</code> ã‚’HTTPSãƒ—ãƒ­ã‚­ã‚·ã«</strong><br>
      HTTPSãƒ—ãƒ­ã‚­ã‚·ï¼š<code>192.168.100.205:8082</code><br>
      ï¼ˆä½µç”¨ã™ã‚‹ãªã‚‰ HTTP å´ã¯ <code>192.168.100.205:8080</code>ï¼‰<br>
      <strong>ä¸­é–“CAè¨¼æ˜æ›¸ã‚’ä¿¡é ¼ã‚¹ãƒˆã‚¢ã«é…å¸ƒ</strong>ï¼ˆGPO/MDMãªã©ï¼‰
    </li>
  </ul>

  <h3>é€éï¼ˆTransparentï¼‰</h3>
  <ul>
    <li>ç«¯æœ«å´ã¯ <strong>ãƒ—ãƒ­ã‚­ã‚·è¨­å®šãªã—</strong>ã€‚</li>
    <li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ©Ÿå™¨ã§ <strong>80/443 â†’ Squidã®ãƒãƒ¼ãƒˆã¸è»¢é€</strong>ã€‚</li>
  </ul>

  <hr>

  <h2 id="trouble">6. ã‚ˆãã‚ã‚‹ãƒãƒã‚Šã©ã“ã‚ï¼ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰</h2>
  <ul>
    <li><label><input type="checkbox"> <strong>ãƒ«ãƒ¼ãƒˆCAé…å¸ƒæ¼ã‚Œ</strong>ï¼šãƒ–ãƒ©ã‚¦ã‚¶ãŒè¨¼æ˜æ›¸ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã™</label></li>
    <li><label><input type="checkbox"> <strong>peer-link / çµŒè·¯ã®VLANæœªé€šé</strong>ï¼ˆL2å†—é•·æ™‚ï¼‰ï¼šHTTPSã ã‘é€šã‚‰ãªã„ãªã©</label></li>
    <li><label><input type="checkbox"> <strong>SNIæœªå–å¾—/ServerNameæœªä¸€è‡´</strong>ï¼šbumpãƒ«ãƒ¼ãƒ«ã®ãƒãƒƒãƒãƒŸã‚¹</label></li>
    <li><label><input type="checkbox"> <strong>FW/NATæœªè¨­å®š</strong>ï¼ˆé€éæ™‚ï¼‰ï¼š443ãŒSquidã«å±Šã„ã¦ã„ãªã„</label></li>
    <li><label><input type="checkbox"> <strong>ACLS/ssl_bumpãƒãƒªã‚·ãƒ¼é †åº</strong>ï¼š<code>bump</code> / <code>splice</code> ã®æ„å›³ã›ã¬é©ç”¨</label></li>
    <li><label><input type="checkbox"> <strong>ã‚­ãƒ£ãƒƒã‚·ãƒ¥/è¨¼æ˜æ›¸å†ç”Ÿæˆã®æ‰‹é †æ¼ã‚Œ</strong>ï¼šæ¤œè¨¼æ™‚ã«å¤ã„è¨¼è·¡ãŒæ®‹ã‚‹</label></li>
  </ul>

  <hr>

  <h2 id="samples">7. ã‚µãƒ³ãƒ—ãƒ«è¨­å®šï¼ˆãã®ã¾ã¾æµç”¨å¯ï¼‰</h2>

  <h3>7.1 æœ€å°æ§‹æˆï¼šæ˜ç¤ºãƒ—ãƒ­ã‚­ã‚·ï¼ˆæ¤œæŸ»ãªã—ï¼‰</h3>
  <pre><code># /etc/squid/squid.conf
http_port 8080

# ä¾‹: æœ€ä½é™ã®ACL
acl allowed src 192.168.0.0/16
http_access allow allowed
http_access deny all</code></pre>

  <h3>7.2 ä½µç”¨æ§‹æˆï¼šæ˜ç¤º + SSL Bump</h3>
  <pre><code># /etc/squid/squid.conf
http_port 8080

https_port 8082 ssl-bump   cert=/etc/squid/ssl_cert/myCA.pem   key=/etc/squid/ssl_cert/myCA.key   generate-host-certificates=on   dynamic_cert_mem_cache_size=4MB

# Bump ãƒãƒªã‚·ãƒ¼ä¾‹
acl step1 at_step SslBump1
ssl_bump peek step1
ssl_bump bump all

# åŸºæœ¬ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
acl allowed src 192.168.0.0/16
http_access allow allowed
http_access deny all

# è¨¼æ˜æ›¸DBï¼ˆåˆå›ã®ã¿ï¼‰
# /etc/squid/ssl_cert/ssl_db ã‚’ä½œã‚‹
# /usr/lib64/squid/security_file_certgen -c -s /etc/squid/ssl_cert/ssl_db -M 4MB</code></pre>

  <h3>7.3 é€éHTTPSï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§443â†’8082è»¢é€ï¼‰</h3>
  <pre><code># /etc/squid/squid.conf
http_port 3128 intercept
https_port 8082 intercept ssl-bump   cert=/etc/squid/ssl_cert/myCA.pem   key=/etc/squid/ssl_cert/myCA.key   generate-host-certificates=on

acl step1 at_step SslBump1
ssl_bump peek step1
ssl_bump bump all

acl allowed src 192.168.0.0/16
http_access allow allowed
http_access deny all</code></pre>
  <p>â€» é€éã¯ <strong>FW/NATãƒ«ãƒ¼ãƒ«</strong> ãŒå¿…é ˆã€‚ç«¯æœ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ä¸Šã§å®Ÿè£…ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã€‚</p>

  <hr>

  <h2 id="summary">8. ã¾ã¨ã‚</h2>
  <ul>
    <li><strong>é€šå¸¸åˆ©ç”¨ï¼ˆæ¤œæŸ»ãªã—ï¼‰</strong>ï¼š<code>http_port 8080</code> ã ã‘ã§OKã€‚è¨¼æ˜æ›¸é…å¸ƒãªã—ã§ç°¡å˜ã€‚</li>
    <li><strong>æ¤œæŸ»ã‚ã‚Š</strong>ï¼š<code>https_port 8082</code> ã§SSL Bumpã€‚<strong>ãƒ«ãƒ¼ãƒˆCAé…å¸ƒãŒå¿…é ˆ</strong>ã€‚</li>
    <li><strong>é€é</strong>ï¼šãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è»¢é€(443â†’8082)ãŒå¿…è¦ã€‚<strong>NAT/FWãƒ«ãƒ¼ãƒ«</strong>ã¨<strong>ãƒãƒªã‚·ãƒ¼é †åº</strong>ã«æ³¨æ„ã€‚</li>
  </ul>
  <p>è¿·ã£ãŸã‚‰ï¼šã¾ãšã¯ <strong><code>http_port 8080</code> å˜ç‹¬</strong> ã§å®‰å®šã•ã›ã‚‹ â†’ ãã®å¾Œã€è¦ä»¶ã«å¿œã˜ã¦ <code>https_port</code>ï¼ˆSSL Bump/é€éï¼‰ã‚’æ®µéšçš„ã«è¿½åŠ ã™ã‚‹ã®ãŒãŠã™ã™ã‚ã€‚</p>

  <hr>

  <h2 id="verify">ä»˜éŒ²ï¼šå‹•ä½œç¢ºèªã‚³ãƒãƒ³ãƒ‰ï¼ˆç®¡ç†ç«¯æœ«ã§ï¼‰</h2>
  <pre><code># HTTPè¶Šã—ã«Googleã®ãƒ˜ãƒƒãƒ€å–å¾—ï¼ˆæ˜ç¤ºãƒ—ãƒ­ã‚­ã‚·8080ï¼‰
curl -I -x http://192.168.100.205:8080 http://www.google.com

# HTTPSã‚’CONNECTã§é€šã™ï¼ˆæ˜ç¤ºãƒ—ãƒ­ã‚­ã‚·8080ï¼‰
curl -I -x http://192.168.100.205:8080 https://www.google.com

# ç›´æ¥HTTPSã§Squidã¸ï¼ˆhttps_port 8082 ã«TLSã§æ¥ç¶šï¼‰
openssl s_client -connect 192.168.100.205:8082 -servername www.google.com </dev/null

# ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã‚µãƒ¼ãƒè¨¼æ˜æ›¸ã®SANã‚’ç¢ºèªï¼ˆssl-bumpæ™‚ï¼‰
openssl s_client -proxy 192.168.100.205:8082   -connect www.google.com:443 -servername www.google.com -showcerts </dev/null   | openssl x509 -noout -text | grep -A2 "Subject Alternative Name"</code></pre>
</div>
</body>
</html>
